var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(a,b,c){a instanceof String&&(a=String(a));for(var d=a.length,e=0;e<d;e++){var f=a[e];if(b.call(c,f,e,a))return{i:e,v:f}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};
$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(a,b,c,d){if(b){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};
$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,c){return $jscomp.findInternal(this,a,c).v}},"es6","es3");$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var a=0;return function(b){return $jscomp.SYMBOL_PREFIX+(b||"")+a++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var b=0;return $jscomp.iteratorPrototype(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();var b=a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(a){function b(){this.batch_=null}function c(a){return a instanceof e?a:new e(function(b,e){b(a)})}if(a&&!$jscomp.FORCE_POLYFILL_PROMISE)return a;b.prototype.asyncExecute=function(a){null==this.batch_&&(this.batch_=[],this.asyncExecuteBatch_());this.batch_.push(a);return this};b.prototype.asyncExecuteBatch_=function(){var a=this;this.asyncExecuteFunction(function(){a.executeBatch_()})};var d=$jscomp.global.setTimeout;b.prototype.asyncExecuteFunction=function(a){d(a,
0)};b.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var a=this.batch_;this.batch_=[];for(var b=0;b<a.length;++b){var e=a[b];delete a[b];try{e()}catch(m){this.asyncThrow_(m)}}}this.batch_=null};b.prototype.asyncThrow_=function(a){this.asyncExecuteFunction(function(){throw a;})};var e=function(a){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var b=this.createResolveAndReject_();try{a(b.resolve,b.reject)}catch(p){b.reject(p)}};e.prototype.createResolveAndReject_=
function(){function a(a){return function(c){e||(e=!0,a.call(b,c))}}var b=this,e=!1;return{resolve:a(this.resolveTo_),reject:a(this.reject_)}};e.prototype.resolveTo_=function(a){if(a===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(a instanceof e)this.settleSameAsPromise_(a);else{a:switch(typeof a){case "object":var b=null!=a;break a;case "function":b=!0;break a;default:b=!1}b?this.resolveToNonPromiseObj_(a):this.fulfill_(a)}};e.prototype.resolveToNonPromiseObj_=function(a){var b=
void 0;try{b=a.then}catch(p){this.reject_(p);return}"function"==typeof b?this.settleSameAsThenable_(b,a):this.fulfill_(a)};e.prototype.reject_=function(a){this.settle_(2,a)};e.prototype.fulfill_=function(a){this.settle_(1,a)};e.prototype.settle_=function(a,b){if(0!=this.state_)throw Error("Cannot settle("+a+", "+b|"): Promise already settled in state"+this.state_);this.state_=a;this.result_=b;this.executeOnSettledCallbacks_()};e.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var a=
this.onSettledCallbacks_,b=0;b<a.length;++b)a[b].call(),a[b]=null;this.onSettledCallbacks_=null}};var f=new b;e.prototype.settleSameAsPromise_=function(a){var b=this.createResolveAndReject_();a.callWhenSettled_(b.resolve,b.reject)};e.prototype.settleSameAsThenable_=function(a,b){var e=this.createResolveAndReject_();try{a.call(b,e.resolve,e.reject)}catch(m){e.reject(m)}};e.prototype.then=function(a,b){function c(a,b){return"function"==typeof a?function(b){try{d(a(b))}catch(r){f(r)}}:b}var d,f,g=new e(function(a,
b){d=a;f=b});this.callWhenSettled_(c(a,d),c(b,f));return g};e.prototype.catch=function(a){return this.then(void 0,a)};e.prototype.callWhenSettled_=function(a,b){function e(){switch(c.state_){case 1:a(c.result_);break;case 2:b(c.result_);break;default:throw Error("Unexpected state: "+c.state_);}}var c=this;null==this.onSettledCallbacks_?f.asyncExecute(e):this.onSettledCallbacks_.push(function(){f.asyncExecute(e)})};e.resolve=c;e.reject=function(a){return new e(function(b,e){e(a)})};e.race=function(a){return new e(function(b,
e){for(var d=$jscomp.makeIterator(a),f=d.next();!f.done;f=d.next())c(f.value).callWhenSettled_(b,e)})};e.all=function(a){var b=$jscomp.makeIterator(a),d=b.next();return d.done?c([]):new e(function(a,e){function f(b){return function(e){m[b]=e;n--;0==n&&a(m)}}var m=[],n=0;do m.push(void 0),n++,c(d.value).callWhenSettled_(f(m.length-1),e),d=b.next();while(!d.done)})};return e},"es6","es3");
var gsid,BROWSER_SUPPORTS=0,dbname="gzenglish-store",dbversion="10",ARTICLE_STORE="notification-article-db",UIDSTORE="unique-id-store",service_worker,db,idb_server_id,idb_subscription_id,last_sub_id,idb,db1,db2,redirectUrl,furl={},notificationApi={},licount,notnow_clicked=0,notnowclicked_config=5,utmval="utm_source=pn-desktop&utm_medium=pn-article&utm_campaign=pn-cms&ref=pn-cms",productid=[],openNotify,notifyClickType,version="2.0.12",k,l,notification_source=1;
Object.defineProperties(window,{indexedDB:{value:window.indexedDB,writable:!0}});if(/(chrome\/)(\d+\.\d+)/i.test(navigator.userAgent)&&0>navigator.userAgent.search("UCBrowser")&&/(chrome\/)(\d+\.\d+)/i.test(navigator.userAgent)&&0>navigator.userAgent.search("Edge")&&/(chrome\/)(\d+\.\d+)/i.test(navigator.userAgent)&&0>navigator.userAgent.search("UBrowser")){var bversion=new Number(RegExp.$2);42<=parseInt(bversion)&&(BROWSER_SUPPORTS=1)}
function getUserCookie(a){var b=document.cookie,c=b.indexOf(" "+a+"=");-1==c&&(c=b.indexOf(a+"="));-1==c?b=null:(c=b.indexOf("=",c)+1,a=b.indexOf(";",c),-1==a&&(a=b.length),b=unescape(b.substring(c,a)));return b}
function setUserCookie(a,b,c,d,e,f){var h=getUserCookie("cookiePolicy");console.log(h);0!=h&&(h=new Date,h.setTime(h.getTime()),c&&(c*=36E5),h=new Date(h.getTime()+c),document.cookie=a+"="+escape(b)+(c?";expires="+h.toGMTString():"")+(d?";path="+d:"")+(e?";domain="+e:"")+(f?";secure":""))}var chkcookiepolicy=getUserCookie("cookiePolicy");0==chkcookiepolicy&&clearTimeout(openNotify);var browserName;
function browserDetection(){var a=navigator.userAgent;browserName=navigator.appName;var b=""+parseFloat(navigator.appVersion);parseInt(navigator.appVersion,10);var c,d;var e=navigator.userAgent;e.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i);var f="desktop";/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(e)&&(f="mobile");-1!=(c=a.indexOf("OPR/"))?(browserName="Opera",b=a.substring(c+4)):-1!=(c=a.indexOf("Opera"))?(browserName="Opera",b=a.substring(c+6),
-1!=(c=a.indexOf("Version"))&&(b=a.substring(c+8))):-1!=(c=a.indexOf("MSIE"))?(browserName="Microsoft Internet Explorer",b=a.substring(c+5)):-1!=(c=a.indexOf("Chrome"))?(browserName="Chrome",b=a.substring(c+7)):-1!=(c=a.indexOf("Safari"))?(browserName="Safari",b=a.substring(c+7),-1!=(c=a.indexOf("Version"))&&(b=a.substring(c+8))):-1!=(c=a.indexOf("Firefox"))?(browserName="Firefox",b=a.substring(c+8)):(e=a.lastIndexOf(" ")+1)<(c=a.lastIndexOf("/"))&&(browserName=a.substring(e,c),b=a.substring(c+1),
browserName.toLowerCase()==browserName.toUpperCase()&&(browserName=navigator.appName));-1!=(d=b.indexOf(";"))&&(b=b.substring(0,d));-1!=(d=b.indexOf(" "))&&(b=b.substring(0,d));a=parseInt(""+b,10);isNaN(a)&&(b=""+parseFloat(navigator.appVersion),parseInt(navigator.appVersion,10));console.log("Browser name  = <em>"+browserName+"</em><br>Full version  = <em>"+b+"</em><br>Device = <em>"+f);"Chrome"==browserName&&42<=b?BROWSER_SUPPORTS=1:"Firefox"==browserName&&44<=b&&"desktop"==f&&(BROWSER_SUPPORTS=
1)}browserDetection();1==BROWSER_SUPPORTS&&0!=chkcookiepolicy&&("serviceWorker"in navigator?navigator.serviceWorker.register("/oiframework-sw-web.js?v="+version).then(function(){console.log("Service Worker Registered")}):console.warn("Service workers aren't supported in this browser."));
notificationApi={html_entity_decode:function(a){var b=document.createElement("textarea");b.innerHTML=a.replace(/</g,"&lt;").replace(/>/g,"&gt;");return b.value},shareContent:function(a,b,c,d){return"<div class='article-slider-sharelinks'><a href='javascript:void(0);' class='article-share'><i class='fa fa-share-alt'></i></a><div class='article-slider-num'><span>"+a+"/"+b+"</span></div><div class='article-slider-footer'><a href='#' class='article-slider-facebook' data-url='"+c+"' data-title='"+d+"'><i class='fa fa-facebook'></i></a><a href='#' class='article-slider-twitter' data-url='"+
c+"' data-title='"+d+"'><i class='fa fa-twitter'></i></a><a href='javascript:void(0);' class='article-social-close'>X</a></div></div>"},removeDuplicatesFromObjArray:function(a,b){var c=[];a.reduce(function(a,e){a[b]!==e[b]&&c.push(e);return e},[]);return c},getAllData:function(){var a=window.indexedDB.open(dbname,dbversion);a.onsuccess=function(b){db1=a.result;if(db1.objectStoreNames.contains(ARTICLE_STORE)){b=db1.transaction([ARTICLE_STORE],"readwrite");b.oncomplete=function(a){console.log("Complete")};
b.onerror=function(a){console.log("Error")};var c=b.objectStore(ARTICLE_STORE).getAll();c.onsuccess=function(a){var b=c.result;a=document.getElementById("notification-content");b=notificationApi.removeDuplicatesFromObjArray(b,"url");console.log(b.length);licount=b.length;0==licount?($(".notification-num").hide(),document.getElementById("clear-inbox")&&(document.getElementById("clear-inbox").style.display="none")):(10<licount&&(licount=10),$(".notification-num").text(licount).show(),document.getElementById("clear-inbox")&&
(document.getElementById("clear-inbox").style.display="block"));var d=10>=b.length?parseInt(b.length)-1:9;b=b.reverse();for(var h="",g=0;g<=d;g++)if(""!=b[g].url){var p=b[g].id+"?"+b[g].url;b[g].url=b[g].url+"?"+utmval;var m=parseInt(g)+1,n=parseInt(licount);m=notificationApi.shareContent(m,n,b[g].url,b[g].title);n=b[g].pdate;n=""==n||"undefined"==n||null==n?"":notificationApi.getDateFormat(n);var q=b[g].fdesc;if(""==q||"undefined"==q||null==q)q="";"-1"<b[g].image.indexOf("/100x90x100")?b[g].image=
b[g].image.replace("/100x90x100",""):"-1"<b[g].image.indexOf("/100x90x75")?b[g].image=b[g].image.replace("/100x90x75",""):b[g].image=b[g].image;sliderImg1=b[g].image.replace("/img/img/","/img/");h+="<li><div class='article-slider-container'><a href='"+b[g].url+"' id='notanchor' data-url='"+p+"' data-index='"+g+"' data-type='article'><div class='article-slider-thumb'><img src='"+sliderImg1+"' alt='' /></div><div class='article-slider-details'><h2 class='article-slider-title'>"+b[g].title+"</h2><div class='article-slider-datetime'>"+
n+"</div><div class='article-slider-desc'>"+q+"</div></div></a></div>"+m+"</li>"}b=notificationApi.html_entity_decode(h);a.innerHTML=b;a=$(".article-slider ul li").length;0<a&&(1>=a?$(".article-slider ul li").addClass("oneslide"):3>=a?$(".article-slider ul li").addClass("slide23"):setTimeout(function(){notfslider=$(".article-slider ul").bxSlider({pager:!1,slideMargin:25,slideWidth:320,moveSlides:1,minSlides:3,hideControlOnEnd:!0,infiniteLoop:!1})},3E3),document.getElementById("notf-cont").style.display=
"block")}}};a.onupgradeneeded=function(a){a=a.target.result;console.log(a);a.objectStoreNames.contains(ARTICLE_STORE)||a.createObjectStore(ARTICLE_STORE);a.objectStoreNames.contains(UIDSTORE)||a.createObjectStore(UIDSTORE)}},deleteData:function(a){db1.transaction([ARTICLE_STORE],"readwrite").objectStore(ARTICLE_STORE).delete(a).onsuccess=function(b){console.log(a+" has been removed from your database.")}},clearData:function(){var a=window.indexedDB.open(dbname,dbversion);a.onsuccess=function(b){db2=
a.result;db2.transaction([ARTICLE_STORE],"readwrite").objectStore(ARTICLE_STORE).clear().onsuccess=function(a){console.log("Object Store has been cleared.")}}},manageNotificationListView:function(a,b,c){$("#licontent"+b).fadeOut(300,function(){$(this).remove()})},trackAppClicked:function(a){""!=a&&fetch("/scripts/cms/controller.php?module=subscription&type=notificationAppClicked&url="+a+"&last_sub_id="+last_sub_id,{method:"post"}).catch(function(a){console.error("Inside 1st error:",a)})},displayNumberNotification:function(){licount--;
$(".notification-num").text(licount);0==licount&&(document.getElementById("notf-cont").style.display="none",$(".notification-num").hide(),$(".notification-text").show(),setTimeout(function(){$(".notification-wrapper").hide()},1E3))},getDateFormat:function(a){var b=new Date(a);a=b.getFullYear();var c=b.getMonth(),d=b.getDate(),e=b.getHours();b=b.getMinutes();10>b&&(b="0"+b);c="January February March April May June July August September October November December".split(" ")[c];return c+" "+d+", "+a+
", "+e+":"+b+"[IST]"},truncateWords:function(a,b){return a.split(" ").splice(0,b).join(" ")},openManageScreen:function(a){var b=$(".article-slider ul li").length;0==a?setTimeout(function(){$(".notification-wrapper").hide()},1E3):(0==b?($(".article-slider-wrapper,.article-overlay").addClass("show-popup"),$(".article-slider-container").show(),$(".article-slider-container").css("overflow-y","hidden"),$(".article-slider").hide()):($(".article-slider").find("li").css("width","320px"),$(".article-slider-wrapper,.article-overlay").addClass("show-popup")),
$(".notification-settings-clearbox").hide())},manageOnOff:function(a,b){0==a?($("."+b).removeClass("onstate"),$("."+b).addClass("offstate"),notificationApi.manageEnableDisable(0),notificationApi.clearData(),$(".notification-bell").hide(),$(".notification-bell-inactive").show(),$(".notification-num").hide(),$(".articlelist").remove()):($("."+b).addClass("onstate"),$("."+b).removeClass("offstate"),$(".notification-bell").show(),$(".notification-bell-inactive").hide(),notificationApi.manageEnableDisable(1))},
manageEnableDisable:function(a){localStorage.getItem("web_id");var b=localStorage.getItem("gzenglish_subscription_id");if(""!=b&&void 0!=b)fetch("/scripts/cms/controller.php?module=subscription&type=manageEnableDisable&last_sub_id="+b+"&active_status="+a,{method:"post"}).then(function(b){b.text().then(function(b){console.log(b);localStorage.setItem("gzenglish_enabled",a);notificationApi.openManageScreen(0)})})["catch"](function(a){console.log("Fetch Error :-S",a)})},manageNotifyProduct:function(a,
b,c,d){localStorage.getItem("web_id");var e=localStorage.getItem("gzenglish_subscription_id");if(""!=e&&void 0!=e)fetch("/scripts/cms/controller.php?module=subscription&type=manageNotifyProduct&last_sub_id="+e+"&pid="+a+"&pname="+b+"&purl="+c+"&ptype="+d,{method:"post"}).then(function(b){b.text().then(function(b){console.log(b);localStorage.setItem("gfproduct_enabled",1);b=localStorage.getItem("product_id");if(""==b||"undefined"==b||null==b)b="";""==b?(productid.push(a),localStorage.setItem("product_id",
JSON.stringify(productid))):(productid=JSON.parse(b),"-1"==productid.indexOf(a)&&(productid.push(a),localStorage.setItem("product_id",JSON.stringify(productid))))})})["catch"](function(a){console.log("Fetch Error :-S",a)})},manageParentOnNotifyClick:function(a){$(".notification-bell").show();$(".notification-bell-inactive").hide();$(".popup-notification-on-off").addClass("onstate");$(".popup-notification-on-off").removeClass("offstate");localStorage.getItem("web_id");var b=localStorage.getItem("gzenglish_subscription_id");
if(""!=b&&void 0!=b)fetch("/scripts/cms/controller.php?module=subscription&type=manageEnableDisable&last_sub_id="+b+"&active_status="+a,{method:"post"}).then(function(b){b.text().then(function(b){console.log(b);localStorage.setItem("gzenglish_enabled",a)})})["catch"](function(a){console.log("Fetch Error :-S",a)})},detectPrivateWindow:function(){var a=window.RequestFileSystem||window.webkitRequestFileSystem;a?a(window.TEMPORARY,100,function(a){console.log("Normal Mode")},function(a){console.log("incognito Mode");
alert("You are in incognito mode.\nSome of the functionalities may not work.")}):console.log("No such Functions....")},adgebraAdBetweenList:function(a){localStorage.getItem("web_id");var b=localStorage.getItem("gzenglish_subscription_id"),c=parseInt(a)+1;console.log(a);if(""!=b&&void 0!=b&&3<=a)fetch("/scripts/cms/controller.php?module=subscription&type=getAdgebraAd&last_sub_id="+b+"&device_type=2&noAds="+Math.floor(c/3),{method:"post"}).then(function(b){b.text().then(function(b){if(""!=b&&void 0!=
b&&null!=b&&(b=JSON.parse(b),3<=a)){if(""!=b[0]&&void 0!=b[0]&&null!=b[0]&&"Campaign Not Found"!=b[0].msgCode){var c=decodeURIComponent(b[0].trackerUrl).replace(/\+/g," "),d=b[0].notificationImage,e=decodeURIComponent(b[0].notificationMessage).replace(/\+/g," ");c="<li id='licontent1'><a href='"+c+"' target='_blank'><div class='article-slider-container' style='height:380px;'><div class='article-slider-thumb' style='text-align:center;'><img src='"+d+"' style='height: 200px;' alt='' /></div><div class='article-slider-details'><h2 class='article-slider-title'>"+
e+"</h2></div></div></a></li>";$("#notification-content > li:nth-child(3)").after(c)}""!=b[1]&&void 0!=b[1]&&null!=b[1]&&"Campaign Not Found"!=b[1].msgCode&&(c=decodeURIComponent(b[1].trackerUrl).replace(/\+/g," "),d=b[1].notificationImage,e=decodeURIComponent(b[1].notificationMessage).replace(/\+/g," "),c="<li id='licontent2'><a href='"+c+"' target='_blank'><div class='article-slider-container' style='height:380px;'><div class='article-slider-thumb' style='text-align:center;'><img src='"+d+"' style='height: 200px;' alt='' /></div><div class='article-slider-details'><h2 class='article-slider-title'>"+
e+"</h2></div></div></a></li>",$("#notification-content > li:nth-child(7)").after(c));""!=b[2]&&void 0!=b[2]&&null!=b[2]&&"Campaign Not Found"!=b[2].msgCode&&(c=decodeURIComponent(b[2].trackerUrl).replace(/\+/g," "),d=b[2].notificationImage,b=decodeURIComponent(b[2].notificationMessage).replace(/\+/g," "),b="<li id='licontent3'><a href='"+c+"' target='_blank'><div class='article-slider-container' style='height:380px;'><div class='article-slider-thumb' style='text-align:center;'><img src='"+d+"' style='height: 200px;' alt='' /></div><div class='article-slider-details'><h2 class='article-slider-title'>"+
b+"</h2></div></div></a></li>",$("#notification-content > li:nth-child(11)").after(b))}})})["catch"](function(a){console.log("Fetch Error :-S",a)})},manageFooterEnableClick:function(a){$(".notification-bell").show();$(".notification-bell-inactive").hide();localStorage.getItem("web_id");var b=localStorage.getItem("gzenglish_subscription_id");$(".manage-notification").show();setTimeout(function(){$(".manage-notification").hide()},5E3);$(".manage-notification-close").on("touchstart click",function(a){$(".manage-notification").hide("slow")});
if(""!=b&&void 0!=b)fetch("/scripts/cms/controller.php?module=subscription&type=manageEnableDisable&last_sub_id="+b+"&active_status="+a,{method:"post"}).then(function(b){b.text().then(function(b){console.log(b);localStorage.setItem("gzenglish_enabled",a);$("#notification-link").hide()})})["catch"](function(a){console.log("Fetch Error :-S",a)})},manageNotificationBlock:function(){console.log(browserName);if("Firefox"==browserName){$(".manage-notification-block-top-firefox").show();$("html,body").css("overflow",
"hidden");setUserCookie("manage_gzenglish_notification_block",1,1440,"/","","");var a=setTimeout(function(){$(".manage-notification-block-top-firefox").hide();$("html,body").css("overflow","auto")},2E4);$(".click-close").on("click",function(b){$(".manage-notification-close-block-firefox").hide("slow");$("html,body").css("overflow","auto");clearTimeout(a)})}else $(".manage-notification-block-top").show(),$("html,body").css("overflow","hidden"),setUserCookie("manage_gzenglish_notification_block",1,
1440,"/","",""),a=setTimeout(function(){$(".manage-notification-block-top").hide();$("html,body").css("overflow","auto")},1E4),$(".click-close-firefox").on("click",function(b){$(".manage-notification-block-top").hide("slow");$("html,body").css("overflow","auto");clearTimeout(a)});$(document).on("click",".click-close",function(b){$(".manage-notification-block-top").hide();$("html,body").css("overflow","auto");clearTimeout(a)});$(document).on("click",".click-close-firefox",function(b){$(".manage-notification-block-top-firefox").hide();
$("html,body").css("overflow","auto");clearTimeout(a)})},manageArticleBottom:function(a){0==a?("default"==Notification.permission&&document.getElementById("notification-articleblock")&&(document.getElementById("notification-articleblock").style.display="block",document.getElementById("already-subscribed").style.display="none",document.getElementById("allow-notifications").style.display="block"),document.querySelector(".oi-dailyalerts")&&(document.querySelector(".oi-dailyalerts").style.display="block"),
document.getElementById("giz-emailsubscribe")&&(document.getElementById("giz-emailsubscribe").style.display="none"),"default"==Notification.permission?(document.getElementById("giz-unsubscribe")&&(document.getElementById("giz-unsubscribe").style.display="none"),document.getElementById("giz-subscribe")&&(document.getElementById("giz-subscribe").style.display="block")):(document.getElementById("giz-unsubscribe")&&(document.getElementById("giz-unsubscribe").style.display="block"),document.getElementById("giz-subscribe")&&
(document.getElementById("giz-subscribe").style.display="none"))):(document.getElementById("notification-articleblock")&&(document.getElementById("notification-articleblock").style.display="none",document.getElementById("already-subscribed").style.display="none",document.getElementById("allow-notifications").style.display="none"),document.querySelector(".oi-dailyalerts")&&(document.querySelector(".oi-dailyalerts").style.display="none"),document.getElementById("giz-unsubscribe")&&(document.getElementById("giz-unsubscribe").style.display=
"none"),document.getElementById("giz-emailsubscribe")&&(document.getElementById("giz-emailsubscribe").style.display="block"),document.getElementById("giz-subscribe")&&(document.getElementById("giz-subscribe").style.display="none"))},updateIndexDb:function(a){var b=window.indexedDB.open(dbname,dbversion);b.onsuccess=function(c){db1=b.result;var d=db1.transaction([dbname],"readwrite");d.objectStore(dbname).get("subscriptionid").onsuccess=function(b){d.objectStore(dbname).put(a,"subscriptionid")}}},
createFcmToken:function(a,b){navigator.serviceWorker.ready.then(function(a){service_worker=a;a.pushManager.subscribe({userVisibleOnly:!0}).then(function(a){a="subscriptionId"in a?a.subscriptionId:a.endpoint.replace("https://fcm.googleapis.com/fcm/send/","");console.log(a+" : New Token Generated");notificationApi.sendTokenToServer(a,b)}).catch(function(a){console.log("An error occurred while retrieving token. ",a)})})},sendTokenToServer:function(a,b){if(""!=b&&void 0!=b)fetch("/scripts/cms/controller.php?module=subscription&type=sendTokenToServer&last_sub_id="+
b+"&currentToken="+a,{method:"post"}).then(function(c){c.text().then(function(c){console.log(c);localStorage.setItem("gzenglish_enabled",1);localStorage.setItem("gzenglish_subscription_id",b);notificationApi.updateIndexDb(a)})})["catch"](function(a){console.log("Fetch Error :-S",a)})},getUserStatus:function(a){if(""!=a&&void 0!=a)fetch("/scripts/cms/controller.php?module=subscription&type=getNotificationStatus&last_sub_id="+a,{method:"post"}).then(function(b){b.text().then(function(b){console.log(b);
3==b&&navigator.serviceWorker.getRegistration().then(function(c){c.unregister().then(function(){localStorage.removeItem("gzenglish_subscription_id");return navigator.serviceWorker.register("/oiframework-sw-web.js?v="+version).then(function(){console.log("Service Worker Registered");notificationApi.createFcmToken(b,a)})}).then(function(a){c!==a})})})})["catch"](function(a){console.log("Fetch Error :-S",a)})},manageSettingsStorage:function(a,b){localStorage.getItem("web_id");var c=localStorage.getItem("gzenglish_subscription_id");
if(""!=c&&void 0!=c)fetch("/scripts/cms/controller.php?module=subscription&type=manageEnableDisable&last_sub_id="+c+"&active_status="+a,{method:"post"}).then(function(c){c.text().then(function(c){localStorage.setItem("gzenglish_enabled",a);0==a?setUserCookie("gzenglish_disabled_val",b,b,"/","",""):(deleteUserCookie("gzenglish_disabled_val","/",""),console.log("cookie Deleted......"))})})["catch"](function(a){console.log("Fetch Error :-S",a)})},manageLocalDbInfo:function(a){var b=window.indexedDB.open(dbname,
dbversion);b.onsuccess=function(c){db1=b.result;db1.objectStoreNames.contains(dbname)&&db1.transaction([dbname],"readwrite").objectStore(dbname).put(a,"block_time")}}};0==BROWSER_SUPPORTS&&(document.getElementById("notification-link")&&(document.getElementById("notification-link").style.display="none"),document.getElementById("giz-emailsubscribe")&&$("#giz-emailsubscribe").show());
if(1==BROWSER_SUPPORTS&&0!=chkcookiepolicy){window.addEventListener("load",function(){console.log("Window Loaded...");var a=localStorage.getItem("gzenglish_subscription_id");if(""==a||"undefined"==a||null==a)a="";"granted"==Notification.permission&&""!=a&&notificationApi.getUserStatus(a)});try{require(["jquery","bxslider"],function(a){if(document.getElementById("upcoming_phones_widget_id_new")){var b,c,d=new XMLHttpRequest;d.onreadystatechange=function(){if(4==this.readyState&&200==this.status&&(b=
JSON.parse(this.responseText),c=a("<div/>").html(b.upcoming_mobiles_list).text(),a("#upcoming_phones_widget_id_new").html(c),document.getElementById("upcoming-product-ids"))){var e=a("#upcoming-product-ids").attr("data-product_list");e=e.split(",");var d=localStorage.getItem("product_id");if(""==d||"undefined"==d||null==d)d="";if("default"==Notification.permission)for(i=0;i<e.length;i++)d=e[i].split("_")[1],a("#"+d+"-gfproduct-subscribe").show(),a("#"+d+"-gfproduct-unsubscribe").hide(),a("#"+d+"-gfproduct-loader").hide();
else if("denied"==Notification.permission)for(i=0;i<e.length;i++)d=e[i].split("_")[1],a("#"+d+"-gfproduct-subscribe").show(),a("#"+d+"-gfproduct-unsubscribe").hide(),a("#"+d+"-gfproduct-loader").hide();else{e=a("#upcoming-product-ids").attr("data-product_list");e=e.split(",");d=localStorage.getItem("product_id");if(""==d||"undefined"==d||null==d)d="";if(""!=d){var f=JSON.parse(d);for(i=0;i<e.length;i++)d=e[i].split("_")[1],"-1"==f.indexOf(e[i])?(a("#"+d+"-gfproduct-subscribe").show(),a("#"+d+"-gfproduct-unsubscribe").hide()):
(a("#"+d+"-gfproduct-subscribe").hide(),a("#"+d+"-gfproduct-unsubscribe").show()),a("#"+d+"-gfproduct-loader").hide()}}a(".gd-phones-launch-alert").on("click",function(){if("denied"==Notification.permission)notificationApi.manageNotificationBlock();else if("default"==Notification.permission){if(1==BROWSER_SUPPORTS){var b=a(this).find("a").attr("data-product_name"),e=a(this).find("a").attr("data-product_id"),d=a(this).find("a").attr("data-product_url"),c=e.split("_")[1];a("#"+c+"-launch-popup").find("#notifyProductName").html(b);
a("#"+c+"-notify-overlay").fadeIn();a("#"+c+"-launch-popup").fadeIn();a("body").css("overflow","hidden");a(".launch-cancel").click(function(){a("#"+c+"-notify-overlay").fadeOut();a("#"+c+"-launch-popup").fadeOut();a("body").css("overflow","inherit")});a("#"+e+"_ok").click(function(){var c=a(this).attr("data-product_id"),e=c.split("_")[1];a("#"+e+"-notify-overlay").fadeOut();a("#"+e+"-launch-popup").fadeOut();a("body").css("overflow","inherit");a(".launchclass").hide();a(".subscribeclass").show();
document.getElementById(e+"-gfproduct-subscribe")&&(a("#"+e+"-gfproduct-subscribe").show(),a("#"+e+"-gfproduct-unsubscribe").hide(),a("#"+e+"-gfproduct-loader").hide());notifyClickType="article-right";subscribeDevice("notify-product",c,b,d,0)})}a(".notification-bell").removeClass("ismovement")}else{b=a(this).find("a").attr("data-product_name");e=a(this).find("a").attr("data-product_id");d=a(this).find("a").attr("data-product_url");c=e.split("_")[1];var f=localStorage.getItem("gfproduct_enabled");
if(""==f||"undefined"==f||null==f)f="";0==a(this).find("a").attr("data-notify")?(notificationApi.manageNotifyProduct(0),a("#"+c+"-gfproduct-subscribe").show(),a("#"+c+"-gfproduct-unsubscribe").hide(),a("#"+c+"-gfproduct-loader").hide()):(b=a(this).find("a").attr("data-product_name"),a("#"+c+"-launch-popup").find("#notifyProductName").html(b),a("#"+c+"-notify-overlay").fadeIn(),a("#"+c+"-launch-popup").fadeIn(),a("body").css("overflow","hidden"),a(".launch-cancel").click(function(){a("#"+c+"-notify-overlay").fadeOut();
a("#"+c+"-launch-popup").fadeOut();a("body").css("overflow","inherit")}),a("#"+e+"_ok").click(function(){var b=a(this).attr("data-product_id"),c=b.split("_")[1],e=a("#"+c+"-gfproduct-subscribe").find("a").attr("data-product_url"),d=a("#"+c+"-gfproduct-subscribe").find("a").attr("data-product_name");a("#"+c+"-notify-overlay").fadeOut();a("#"+c+"-launch-popup").fadeOut();a("body").css("overflow","inherit");a(".launchclass").hide();a(".subscribeclass").show();notificationApi.manageNotifyProduct(b,d,
e,0);a("#"+c+"-gfproduct-subscribe").hide();a("#"+c+"-gfproduct-unsubscribe").show();a("#"+c+"-gfproduct-loader").hide()}))}})}};d.open("GET","/scripts/gadget-finder/gzUpcomingPhoneWidget.php",!0);d.send()}console.log(Notification.permission);var e=localStorage.getItem("gzenglish_subscription_id");if(""==e||"undefined"==e||null==e)e="";"granted"==Notification.permission&&""!=e&&notificationApi.getAllData();d=getUserCookie("isShown");if("undefined"==typeof d||null==d)notificationApi.detectPrivateWindow(),
setUserCookie("isShown",1,1440,"/","","");d=localStorage.getItem("gfproduct_enabled");if(""==d||"undefined"==d||null==d)d="";e=localStorage.getItem("gzenglish_subscription_id");d=localStorage.getItem("gzenglish_enabled");if(""==d||"undefined"==d||null==d)d="";licount=a("ul#not-content li").length;console.log("No Of Notification : "+licount);0==licount?a(".notification-num").hide():a(".notification-num").text(licount).show();var f=getUserCookie("ds_notnow_clicked");if(""==f||"undefined"==f||null==
f)f="";if("default"==Notification.permission){var h=getUserCookie("desktop_bsnotification_seen");"undefined"==typeof h||null==h?(f<notnowclicked_config&&(openNotify=setTimeout(function(){a("div#oiNotification").addClass("shownotf")},8E3)),document.getElementById("notification_bell").style.display="none",setUserCookie("desktop_bsnotification_seen",1,24,"/","","")):(document.getElementById("notification_bell").style.display="block",a(".notification-bell").addClass("ismovement"));document.getElementById("notification-link")&&
a("#notification-link").show();document.getElementById("giz-subscribe")&&a("#giz-subscribe").show();document.getElementById("notificationStatusId")&&(e=a("#notificationStatusId").attr("data-notification_flag"),"true"==e&&document.getElementById("gfproduct-subscribe")&&(a("#gfproduct-subscribe").show(),a("#gfproduct-unsubscribe").hide(),a("#gfproduct-loader").hide()));notificationApi.manageArticleBottom(0)}else if("denied"==Notification.permission)h=getUserCookie("desktop_bsnotification_seen"),"undefined"==
typeof h||null==h?(f<notnowclicked_config&&(openNotify=setTimeout(function(){a("div#oiNotification").addClass("shownotf")},8E3)),document.getElementById("notification_bell").style.display="none",setUserCookie("desktop_bsnotification_seen",1,24,"/","","")):(a(".notification-bell").hide(),a(".notification-bell-inactive").show()),document.getElementById("notification-link")&&a("#notification-link").show(),document.getElementById("giz-unsubscribe")&&a("#giz-unsubscribe").show(),document.getElementById("notificationStatusId")&&
(e=a("#notificationStatusId").attr("data-notification_flag"),"true"==e&&document.getElementById("gfproduct-subscribe")&&(a("#gfproduct-subscribe").show(),a("#gfproduct-unsubscribe").hide(),a("#gfproduct-loader").hide())),notificationApi.manageArticleBottom(0);else{if(""==e||"undefined"==e||null==e)a(".notification-bell").hide(),notificationApi.manageArticleBottom(0);else if(1==d?(a(".popup-notification-on-off").addClass("onstate"),a(".popup-notification-on-off").removeClass("offstate"),a(".notification-bell").show(),
document.getElementById("notification-link")&&a("#notification-link").hide(),document.getElementById("giz-emailsubscribe")&&a("#giz-emailsubscribe").show(),notificationApi.manageArticleBottom(1)):(a(".popup-notification-on-off").removeClass("onstate"),a(".popup-notification-on-off").addClass("offstate"),a(".notification-bell-inactive").show(),document.getElementById("notification-link")&&a("#notification-link").show(),document.getElementById("giz-unsubscribe")&&a("#giz-unsubscribe").show(),notificationApi.manageArticleBottom(0)),
document.getElementById("notificationStatusId")){e=a("#notificationStatusId").attr("data-notification_flag");var g=a("#notificationStatusId").attr("data-product_id");f=localStorage.getItem("product_id");if(""==f||"undefined"==f||null==f)f="";if("true"==e){if(document.getElementById("gfproduct-subscribe")){f=localStorage.getItem("product_id");if(""==f||"undefined"==f||null==f)f="";""==f?(a("#gfproduct-subscribe").show(),a("#gfproduct-unsubscribe").hide()):(g=a("#gfproduct-subscribe").attr("data-product_id"),
productid=JSON.parse(f),"-1"<productid.indexOf(g)?(a("#gfproduct-subscribe").hide(),a("#gfproduct-unsubscribe").show()):(a("#gfproduct-subscribe").show(),a("#gfproduct-unsubscribe").hide()));a("#gfproduct-loader").hide()}}else""!=f&&(productid=JSON.parse(f),"-1"<productid.indexOf(g)&&(productid.pop(g),localStorage.setItem("product_id",JSON.stringify(productid))))}a(".notification-bell").removeClass("ismovement");e=getUserCookie("gzenglish_disabled_val");f=localStorage.getItem("gzenglish_enabled_time");
if(""==f||"undefined"==f||null==f)f="";console.log(e+" : Cookie Value For Radio Button");if("undefined"==typeof e||null==e){e=f.split("_")[0];g=f.split("_")[1];var p=(new Date).getHours();""!=g&&void 0!=g&&(h=p>=e&&p<g?1:0);0==f||""==f?a("input[name=block-radio][value=0]").attr("checked","checked"):(e=f.split("_"),f=e[0],e=e[1],0==h?a("input[name=block-radio][value=0]").attr("checked","checked"):(a("input[name=block-radio][value=1]").attr("checked","checked"),a("#block-from").removeAttr("disabled"),
a("#block-to").removeAttr("disabled")),a("#block-from option[value="+f+"]").attr("selected","selected"),a("#block-to option[value="+e+"]").attr("selected","selected"));1==d?(a(".notification-bell").show(),a(".notification-bell-inactive").hide()):(a(".notification-bell").hide(),a(".notification-bell-inactive").show())}else a("input[name=block-radio][value="+e+"]").attr("checked","checked"),a(".notification-bell").hide(),a(".notification-bell-inactive").show()}if(document.querySelector(".launch-alert-class")&&
document.getElementById("upcoming-product-ids")){h=a("#upcoming-product-ids").attr("data-product_list");h=h.split(",");f=localStorage.getItem("product_id");if(""==f||"undefined"==f||null==f)f="";if("default"==Notification.permission)for(i=0;i<h.length;i++)d=h[i].split("_")[1],a("#"+d+"-gfproduct-subscribe").show(),a("#"+d+"-gfproduct-unsubscribe").hide(),a("#"+d+"-gfproduct-loader").hide();else if("denied"==Notification.permission)for(i=0;i<h.length;i++)d=h[i].split("_")[1],a("#"+d+"-gfproduct-subscribe").show(),
a("#"+d+"-gfproduct-unsubscribe").hide(),a("#"+d+"-gfproduct-loader").hide();else{h=a("#upcoming-product-ids").attr("data-product_list");h=h.split(",");f=localStorage.getItem("product_id");if(""==f||"undefined"==f||null==f)f="";if(""!=f)for(f=JSON.parse(f),i=0;i<h.length;i++)d=h[i].split("_")[1],"-1"==f.indexOf(h[i])?(a("#"+d+"-gfproduct-subscribe").show(),a("#"+d+"-gfproduct-unsubscribe").hide()):(a("#"+d+"-gfproduct-subscribe").hide(),a("#"+d+"-gfproduct-unsubscribe").show()),a("#"+d+"-gfproduct-loader").hide()}a(".gd-phones-launch-alert").on("click",
function(){if("denied"==Notification.permission)notificationApi.manageNotificationBlock();else if("default"==Notification.permission){if(1==BROWSER_SUPPORTS){var b=a(this).find("a").attr("data-product_name"),c=a(this).find("a").attr("data-product_id"),e=a(this).find("a").attr("data-product_url"),d=c.split("_")[1];a("#"+d+"-launch-popup").find("#notifyProductName").html(b);a("#"+d+"-notify-overlay").fadeIn();a("#"+d+"-launch-popup").fadeIn();a("body").css("overflow","hidden");a(".launch-cancel").click(function(){a("#"+
d+"-notify-overlay").fadeOut();a("#"+d+"-launch-popup").fadeOut();a("body").css("overflow","inherit")});a("#"+c+"_ok").click(function(){var c=a(this).attr("data-product_id"),d=c.split("_")[1];a("#"+d+"-notify-overlay").fadeOut();a("#"+d+"-launch-popup").fadeOut();a("body").css("overflow","inherit");a(".launchclass").hide();a(".subscribeclass").show();document.getElementById(d+"-gfproduct-subscribe")&&(a("#"+d+"-gfproduct-subscribe").show(),a("#"+d+"-gfproduct-unsubscribe").hide(),a("#"+d+"-gfproduct-loader").hide());
notifyClickType="article-right";subscribeDevice("notify-product",c,b,e,0)})}a(".notification-bell").removeClass("ismovement")}else{b=a(this).find("a").attr("data-product_name");c=a(this).find("a").attr("data-product_id");e=a(this).find("a").attr("data-product_url");d=c.split("_")[1];var f=localStorage.getItem("gfproduct_enabled");if(""==f||"undefined"==f||null==f)f="";0==a(this).find("a").attr("data-notify")?(notificationApi.manageNotifyProduct(0),a("#"+d+"-gfproduct-subscribe").show(),a("#"+d+"-gfproduct-unsubscribe").hide(),
a("#"+d+"-gfproduct-loader").hide()):(b=a(this).find("a").attr("data-product_name"),a("#"+d+"-launch-popup").find("#notifyProductName").html(b),a("#"+d+"-notify-overlay").fadeIn(),a("#"+d+"-launch-popup").fadeIn(),a("body").css("overflow","hidden"),a(".launch-cancel").click(function(){a("#"+d+"-notify-overlay").fadeOut();a("#"+d+"-launch-popup").fadeOut();a("body").css("overflow","inherit")}),a("#"+c+"_ok").click(function(){var b=a(this).attr("data-product_id"),c=b.split("_")[1],d=a("#"+c+"-gfproduct-subscribe").find("a").attr("data-product_url"),
e=a("#"+c+"-gfproduct-subscribe").find("a").attr("data-product_name");a("#"+c+"-notify-overlay").fadeOut();a("#"+c+"-launch-popup").fadeOut();a("body").css("overflow","inherit");a(".launchclass").hide();a(".subscribeclass").show();notificationApi.manageNotifyProduct(b,e,d,0);a("#"+c+"-gfproduct-subscribe").hide();a("#"+c+"-gfproduct-unsubscribe").show();a("#"+c+"-gfproduct-loader").hide()}))}})}a(".instant-updates-close").on("click",function(b){b.preventDefault();"denied"==Notification.permission?
(a(".notification-bell").hide(),a(".notification-bell-inactive").show()):(document.getElementById("notification_bell").style.display="block",a(".notification-bell").addClass("ismovement"));a("div#oiNotification").removeClass("shownotf");b=getUserCookie("ds_notnow_clicked");b=""==b||"undefined"==b||null==b?parseInt(notnow_clicked)+1:parseInt(b)+1;setUserCookie("ds_notnow_clicked",b,144E3,"/","","")});a(document).on("click",".click-close",function(b){a(".manage-notification-block-top").hide()});a("#enable-btn").on("click",
function(b){b.preventDefault();"denied"==Notification.permission?(a(".notification-bell").hide(),a(".notification-bell-inactive").show(),a("div#oiNotification").removeClass("shownotf"),b=getUserCookie("manage_gzenglish_notification_block"),"undefined"!=typeof b&&null!=b||notificationApi.manageNotificationBlock()):(a("div#oiNotification").removeClass("shownotf"),1==BROWSER_SUPPORTS&&(notifyClickType="app-top",notification_source=4,subscribeDevice(),a(".notification-bell").removeClass("ismovement"),
a(".notf-overlay").show()))});a(".notification-bell").on("click",function(){"denied"==Notification.permission?(a(".notification-bell").hide(),a(".notification-bell-inactive").show(),notificationApi.manageNotificationBlock()):"default"==Notification.permission?(notifyClickType="top",1==BROWSER_SUPPORTS&&(subscribeDevice(),a(".notf-overlay").show()),a(".notification-bell").removeClass("ismovement")):(a("body,html").css("overflow","hidden"),notificationApi.openManageScreen(1))});a("#notification_bell_left").on("click",
function(){"denied"==Notification.permission?(a(".notification-bell").hide(),a(".notification-bell-inactive").show(),notificationApi.manageNotificationBlock()):"default"==Notification.permission?(ga("gizboten.send","event","pn-cms","desktop-article","article-left"),notifyClickType="left",1==BROWSER_SUPPORTS&&(notification_source=2,subscribeDevice(),a(".notf-overlay").show()),a(".notification-bell").removeClass("ismovement")):notificationApi.openManageScreen(1)});a(".notification_bell_unsub").on("click",
function(){"denied"==Notification.permission?notificationApi.manageNotificationBlock():notificationApi.openManageScreen(1)});a(".notification-bell-inactive").on("click",function(){"denied"==Notification.permission?notificationApi.manageNotificationBlock():notificationApi.openManageScreen(1)});a(".launch-alert").on("click",function(){if("denied"==Notification.permission)notificationApi.manageNotificationBlock();else if("default"==Notification.permission){if(1==BROWSER_SUPPORTS){var b=a("#gfproduct-subscribe").attr("data-product_name");
a("#notifyProductName").html(b);a(".notify-overlay").fadeIn();a(".launch-popup").fadeIn();a("body").css("overflow","hidden");a(".launch-cancel").click(function(){a(".notify-overlay").fadeOut();a(".launch-popup").fadeOut();a("body").css("overflow","inherit")});a(".launch-ok").click(function(){a(".notify-overlay").fadeOut();a(".launch-popup").fadeOut();a("body").css("overflow","inherit");a(".launchclass").hide();a(".subscribeclass").show();document.getElementById("gfproduct-subscribe")&&(a("#gfproduct-subscribe").show(),
a("#gfproduct-unsubscribe").hide(),a("#gfproduct-loader").hide());var b=a("#gfproduct-subscribe").attr("data-product_id"),c=a("#gfproduct-subscribe").attr("data-product_name"),d=a("#gfproduct-subscribe").attr("data-product_url"),e=a("#gfproduct-subscribe").attr("data-product_type");subscribeDevice("notify-product",b,c,d,e)})}a(".notification-bell").removeClass("ismovement")}else{b=localStorage.getItem("gfproduct_enabled");if(""==b||"undefined"==b||null==b)b="";0==a(this).attr("data-notify")?(notificationApi.manageNotifyProduct(0),
a("#gfproduct-subscribe").show(),a("#gfproduct-unsubscribe").hide(),a("#gfproduct-loader").hide()):(b=a("#gfproduct-subscribe").attr("data-product_name"),a("#notifyProductName").html(b),a(".notify-overlay").fadeIn(),a(".launch-popup").fadeIn(),a("body").css("overflow","hidden"),a(".launch-cancel").click(function(){a(".notify-overlay").fadeOut();a(".launch-popup").fadeOut();a("body").css("overflow","inherit")}),a(".launch-ok").click(function(){var b=a("#gfproduct-subscribe").attr("data-product_id"),
c=a("#gfproduct-subscribe").attr("data-product_name"),d=a("#gfproduct-subscribe").attr("data-product_url"),e=a("#gfproduct-subscribe").attr("data-product_type");a(".notify-overlay").fadeOut();a(".launch-popup").fadeOut();a("body").css("overflow","inherit");a(".launchclass").hide();a(".subscribeclass").show();notificationApi.manageNotifyProduct(b,c,d,e);a("#gfproduct-subscribe").hide();a("#gfproduct-unsubscribe").show();a("#gfproduct-loader").hide()}))}});if(document.getElementById("notify-subscribe"))a("#notify-subscribe").on("click touchstart",
function(){ga("gizboten.send","event","Notification_Article","Notification_Desktop","Gizbot");"denied"==Notification.permission?notificationApi.manageNotificationBlock():"default"==Notification.permission?(notifyClickType="bottom",1==BROWSER_SUPPORTS&&(subscribeDevice(),a(".notf-overlay").show())):0==localStorage.getItem("gzenglish_enabled")&&(a("#notification-link").show(),a(".popup-notification-on-off").addClass("onstate"),a(".popup-notification-on-off").removeClass("offstate"),notificationApi.manageFooterEnableClick(1))});
if(document.getElementById("notification-articleblock"))a(".allow-notifications").on("click",function(){"denied"==Notification.permission?(a(".notification-bell").hide(),a(".notification-bell-inactive").show(),notificationApi.manageNotificationBlock()):"default"==Notification.permission?1==BROWSER_SUPPORTS&&(notification_source=3,subscribeDevice(),a(".notf-overlay").show()):(notificationApi.manageOnOff(1,"popup-notification-on-off"),notificationApi.manageArticleBottom(1))});a(document).on("click",
"#closebtn",function(b){b.preventDefault();notificationApi.displayNumberNotification();b=a(this).attr("data-url");var c=a(this).attr("data-index");notificationApi.manageNotificationListView(b,c,"close");notificationApi.deleteData(b)});a(document).on("click","#notanchor",function(b){b=a(this).attr("href");a(this).attr("data-index");var c=a(this).attr("data-url");window.location.href=b+"?utm_source=pn-&utm_medium=pn-article&utm_campaign=pn-cms";b=b.split("?")[0];notificationApi.trackAppClicked(b);notificationApi.deleteData(c)});
a(document).on("click",".popup-notification-on-off",function(b){a(this).hasClass("onstate")?(document.getElementById("notification-link")&&a("#notification-link").show(),notificationApi.manageOnOff(0,"popup-notification-on-off"),document.getElementById("giz-unsubscribe")&&a("#giz-unsubscribe").show(),document.getElementById("giz-emailsubscribe")&&a("#giz-emailsubscribe").hide(),notificationApi.manageArticleBottom(0)):(document.getElementById("notification-link")&&a("#notification-link").hide(),notificationApi.manageOnOff(1,
"popup-notification-on-off"),document.getElementById("giz-emailsubscribe")&&a("#giz-emailsubscribe").show(),document.getElementById("giz-unsubscribe")&&a("#giz-unsubscribe").hide(),notificationApi.manageArticleBottom(1))});a(document).on("click",".notification-clear",function(b){notificationApi.clearData();a(".notification-text").show();a(".notification-num").hide();a(".articlelist").remove();document.getElementById("notf-cont").style.display="none";licount=0});a(".popup-notification-text").on("click",
function(b){b.preventDefault();a(".notification-wrapper").hide()});a(document).on("click",".article-share",function(b){a(this).parent(".article-slider-sharelinks").find(".article-slider-footer").addClass("active")});a(document).on("click",".article-social-close",function(b){a(".article-slider-footer").removeClass("active")});a(".notification-on-off .on-off-link").click(function(){a(this).parent(".notification-on-off").hasClass("onstate")?(a(this).parent(".notification-on-off").removeClass("onstate"),
a(this).parent(".notification-on-off").addClass("offstate"),a(".notification-settings-popup").show()):(a(this).parent(".notification-on-off").addClass("onstate"),a(this).parent(".notification-on-off").removeClass("offstate"),a(".notification-settings-popup").hide())});a(".notification-settings-heading span").click(function(){a(".notification-settings-popup").hide()});a(".article-popup-close").click(function(){a(".article-slider-wrapper,.article-overlay").removeClass("show-popup");a(".notification-settings-popup").hide();
a(".article-slider-wrapper").removeClass("hide-popup");a(".notification-settings-clearbox").hide();a("body,html").css("overflow","")});a(".article-popup-settings").click(function(){a(this).parent().addClass("hide-popup");a(".notification-settings-popup").addClass("show-popup");a(".notification-settings-popup").show()});a(".notification-settings.notfset").click(function(){a(".notification-settings-popup").removeClass("show-popup");a(".article-slider-wrapper").removeClass("hide-popup");a(".notification-settings-popup").hide()});
a(".no").click(function(){a(".notification-settings-clearbox").hide();a(".notification-settings-popup").show()});a(".yes").click(function(){notificationApi.clearData();a(".notification-settings-popup").removeClass("show-popup");a(".article-slider-wrapper").removeClass("hide-popup");a(".notification-settings-popup").hide();a(".notification-settings-clearbox").hide();a(".article-slider-wrapper,.article-overlay").addClass("show-popup");a(".article-slider-container").show();a(".article-slider").hide();
a(".notification-num").hide()});a(".notification-settings-heading a").click(function(){a(".notification-settings-clearbox").show();a(".notification-settings-popup").hide()});a(".notification-settings.clearnotf").click(function(){a(".notification-settings-clearbox").hide();a(".notification-settings-popup").show()});a(".notification-settings-btn").on("click",function(){if(1==a("input[name='block-radio']:checked").val()){var b=document.getElementById("block-from").value;var c=document.getElementById("block-to").value;
var d=b+"_"+c;b==c?(a("#error_msg").html('<p style="color:red;font-size:15px;">Start Time and End Time should not be same.</p>').show(),setTimeout(function(){a("#error_msg").hide()},3E3)):(localStorage.setItem("gzenglish_enabled_time",d),notificationApi.manageSettingsStorage(1,d),notificationApi.manageLocalDbInfo(d),a("#error_msg").html('<p style="color:green;font-size:15px;">Settings data stored successfully.</p>').show(),setTimeout(function(){a("#error_msg").hide()},3E3),a(".notification-bell").show(),
a(".notification-bell-inactive").hide())}else 0==a("input[name='block-radio']:checked").val()?(d=a("input[name='block-radio']:checked").val(),localStorage.setItem("gzenglish_enabled_time",0),notificationApi.manageSettingsStorage(1,d),notificationApi.manageLocalDbInfo(0),a(".notification-bell").show(),a(".notification-bell-inactive").hide()):9999==a("input[name='block-radio']:checked").val()?(d=a("input[name='block-radio']:checked").val(),localStorage.setItem("gzenglish_enabled_time",0),notificationApi.manageSettingsStorage(0,
d),notificationApi.manageLocalDbInfo(0),a(".notification-bell").hide(),a(".notification-bell-inactive").show(),document.getElementById("social-notification-promo")&&(document.getElementById("already-subscribed").style.display="none",document.getElementById("allow-notifications").style.display="block")):(d=a("input[name='block-radio']:checked").val(),localStorage.setItem("gzenglish_enabled_time",0),notificationApi.manageSettingsStorage(0,d),notificationApi.manageLocalDbInfo(0),a(".notification-bell").hide(),
a(".notification-bell-inactive").show()),a("#error_msg").html('<p style="color:green;font-size:15px;">Settings data stored successfully.</p>').show(),setTimeout(function(){a("#error_msg").hide()},3E3)});a(".squaredradio input[name='block-radio']").on("click",function(){1==a(this).val()&&a(this).is(":checked")?(a("#block-from").removeAttr("disabled"),a("#block-to").removeAttr("disabled")):(a("#block-from").attr("disabled",!0),a("#block-to").attr("disabled",!0))});a(document).on("click",".article-slider-footer a",
function(b){var c=a(this).attr("class");console.log(c);var d=a(this).attr("data-url"),e=a(this).attr("data-title");switch(c){case "article-slider-whatsapp":whatsapp_social_url=encodeURIComponent(d);window.location.href="whatsapp://send?text="+encodeURIComponent(e)+" "+whatsapp_social_url;break;case "article-slider-twitter":c=encodeURIComponent(d);e=encodeURIComponent(e);window.open("https://twitter.com/share?url="+c+"&via=gizbot&text="+e,"Share on Twitter","menubar=no,toolbar=no,resizable=no,scrollbars=no,height=400,width=600");
break;case "article-slider-facebook":e="https://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent(d),window.open(e,"Share on Facebook","menubar=no,toolbar=no,resizable=no,scrollbars=no,height=400,width=600")}b.preventDefault()})})}catch(a){console.log("Notification Block: "+a)}}
function promisifyRequest(a){return new Promise(function(b,c){function d(){b(a.result);f()}function e(){c(a.error);f()}function f(){a.removeEventListener("complete",d);a.removeEventListener("success",d);a.removeEventListener("error",e);a.removeEventListener("abort",e)}a.addEventListener("complete",d);a.addEventListener("success",d);a.addEventListener("error",e);a.addEventListener("abort",e)})}
function IndexDBWrapper(a,b,c){var d=indexedDB.open(a,b);this.ready=promisifyRequest(d);d.onupgradeneeded=function(a){c(d.result,a.oldVersion)}}function userId(){for(var a="",b=0;26>b;b++){var c=Math.floor(10*Math.random());a+="0123456789".substring(c,c+1)}b=Math.round((new Date).getTime()/1E3);return a+"_"+b}
function getUserTrackerId(){var a=getUserCookie("oi_usr_trackerId");var b=localStorage.getItem("oi_usr_trackerId");if(""==a||"undefined"==a||null==a)a="";if(""==b||"undefined"==b||null==b)b="";""==a&&(""!=b?a=b:(a=userId(),localStorage.setItem("oi_usr_trackerId",a),url_arr=window.location.href.split("/"),domain=url_arr[2],lang_arr=domain.split("."),setUserCookie("oi_usr_trackerId",a,87600,"/","."+lang_arr[1]+"."+lang_arr[2],"")));return a}var userTrackerId=getUserTrackerId();
console.log(userTrackerId+"UUUUUUU");
function onPushSubscription(a,b,c,d,e,f,h){if(c)var g=c.split("_")[1];$(".notf-overlay").hide();var p=getUserCookie("manage_gzenglish_notification");console.log("pushSubscription = ");var m=localStorage.getItem("gzenglish_subscription_id"),n=localStorage.getItem("gzenglish_enabled");if(""==m||"undefined"==m||null==m)m="";if(""==n||"undefined"==n||null==n)n="";var q=localStorage.getItem("web_id");if(""==q||"undefined"==q||null==q)q="";gsid="subscriptionId"in a?a.subscriptionId:a.endpoint.replace("https://fcm.googleapis.com/fcm/send/",
"");a=getUserTrackerId();console.log(gsid);void 0==h&&(h="top");0!=b?(document.getElementById("gfproduct-loader")&&($("#gfproduct-loader").show(),$("#gfproduct-subscribe").hide(),$("#gfproduct-unsubscribe").hide()),b="/scripts/cms/controller.php?module=subscription&regId="+gsid+"&sys_gen_id="+m+"&user_tracker_id="+a+"&pid="+c+"&pname="+d+"&purl="+e+"&notifyproduct="+b+"&ptype="+f+"&notification_source="+notification_source):b="/scripts/cms/controller.php?module=subscription&regId="+gsid+"&sys_gen_id="+
m+"&user_tracker_id="+a+"&notifyClickType="+h+"&notification_source="+notification_source;fetch(b,{method:"post"}).then(function(a){a.text().then(function(a){console.log(a);var b=JSON.parse(a);""==m&&(localStorage.setItem("gzenglish_subscription_id",b.id),localStorage.setItem("gzenglish_enabled",1));""==q&&localStorage.setItem("web_id",b.wi);if("updated"==b.msg){$(".notification-bell").show();$(".notification-bell-inactive").hide();localStorage.setItem("gzenglish_enabled",1);document.getElementById("notification-link")&&
$("#notification-link").hide();document.getElementById("giz-subscribe")&&$("#giz-subscribe").hide();document.getElementById("giz-emailsubscribe")&&$("#giz-emailsubscribe").show();if(document.getElementById("gfproduct-subscribe")){a=$("#gfproduct-subscribe").attr("data-product_id");var c=localStorage.getItem("product_id");if(""==c||"undefined"==c||null==c)c="";""==c?(productid.push(a),localStorage.setItem("product_id",JSON.stringify(productid))):(productid=JSON.parse(c),"-1"==productid.indexOf(a)&&
(productid.push(a),localStorage.setItem("product_id",JSON.stringify(productid))));localStorage.setItem("gfproduct_enabled",1);$("#gfproduct-subscribe").hide();$("#gfproduct-unsubscribe").show();$("#gfproduct-loader").hide()}if(""!=g&&void 0!=g){a="mobile_"+g;c=localStorage.getItem("product_id");if(""==c||"undefined"==c||null==c)c="";""==c?(productid.push(a),localStorage.setItem("product_id",JSON.stringify(productid))):(productid=JSON.parse(c),"-1"==productid.indexOf(a)&&(productid.push(a),localStorage.setItem("product_id",
JSON.stringify(productid))));localStorage.setItem("gfproduct_enabled",1);$("#"+g+"-gfproduct-subscribe").hide();$("#"+g+"-gfproduct-unsubscribe").show();$("#"+g+"-gfproduct-loader").hide()}notificationApi.manageArticleBottom(1)}else if("success"==b.msg){localStorage.setItem("gzenglish_subscription_id",b.id);localStorage.setItem("product_id","");$(".notification-bell").show();if("undefined"==typeof p||null==p)$(".manage-notification").show(),setUserCookie("manage_gzenglish_notification",1,1440,"/",
"",""),setTimeout(function(){$(".manage-notification").hide()},5E3),$(".manage-notification-close").on("click",function(a){$(".manage-notification").hide("slow")});onRegisterNotify(service_worker);localStorage.setItem("gzenglish_enabled",1);document.getElementById("notification-link")&&$("#notification-link").hide();document.getElementById("giz-subscribe")&&$("#giz-subscribe").hide();document.getElementById("giz-emailsubscribe")&&$("#giz-emailsubscribe").show();$("#gfproduct-subscribe")&&($("#gfproduct-subscribe").hide(),
$("#gfproduct-unsubscribe").show(),$("#gfproduct-loader").hide());if(""!=g&&void 0!=g){a="mobile_"+g;c=localStorage.getItem("product_id");if(""==c||"undefined"==c||null==c)c="";""==c?(productid.push(a),localStorage.setItem("product_id",JSON.stringify(productid))):(productid=JSON.parse(c),"-1"==productid.indexOf(a)&&(productid.push(a),localStorage.setItem("product_id",JSON.stringify(productid))));$("#"+g+"-gfproduct-subscribe").hide();$("#"+g+"-gfproduct-unsubscribe").show();$("#"+g+"-gfproduct-loader").hide()}notificationApi.manageArticleBottom(1)}else if("successproduct"==
b.msg){$(".notification-bell").show();if("undefined"==typeof p||null==p)$(".manage-notification").show(),setUserCookie("manage_gzenglish_notification",1,1440,"/","",""),setTimeout(function(){$(".manage-notification").hide()},5E3),$(".manage-notification-close").on("click",function(a){$(".manage-notification").hide("slow")});onRegisterNotify(service_worker);localStorage.setItem("gzenglish_enabled",1);document.getElementById("notification-link")&&$("#notification-link").hide();document.getElementById("giz-subscribe")&&
$("#giz-subscribe").hide();document.getElementById("giz-emailsubscribe")&&$("#giz-emailsubscribe").show();if(document.getElementById("gfproduct-subscribe")){a=$("#gfproduct-subscribe").attr("data-product_id");c=localStorage.getItem("product_id");if(""==c||"undefined"==c||null==c)c="";""==c?(productid.push(a),localStorage.setItem("product_id",JSON.stringify(productid))):(productid=JSON.parse(c),"-1"==productid.indexOf(a)&&(productid.push(a),localStorage.setItem("product_id",JSON.stringify(productid))));
localStorage.setItem("gfproduct_enabled",1);$("#gfproduct-subscribe")&&($("#gfproduct-subscribe").hide(),$("#gfproduct-unsubscribe").show(),$("#gfproduct-loader").hide())}if(""!=g&&void 0!=g){a="mobile_"+g;c=localStorage.getItem("product_id");if(""==c||"undefined"==c||null==c)c="";""==c?(productid.push(a),localStorage.setItem("product_id",JSON.stringify(productid))):(productid=JSON.parse(c),"-1"==productid.indexOf(a)&&(productid.push(a),localStorage.setItem("product_id",JSON.stringify(productid))));
localStorage.setItem("gfproduct_enabled",1);$("#"+g+"-gfproduct-subscribe").hide();$("#"+g+"-gfproduct-unsubscribe").show();$("#"+g+"-gfproduct-loader").hide()}}window.indexedDB=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;window.IDBTransaction=window.IDBTransaction||window.webkitIDBTransaction||window.msIDBTransaction;window.IDBKeyRange=window.IDBKeyRange||window.webkitIDBKeyRange||window.msIDBKeyRange;window.indexedDB||window.alert("Your browser doesn't support a stable version of IndexedDB.");
var d,e=window.indexedDB.open(dbname,dbversion),f=function(a){a.objectStoreNames.contains(dbname)||a.createObjectStore(dbname);a.objectStoreNames.contains(ARTICLE_STORE)||a.createObjectStore(ARTICLE_STORE);a.objectStoreNames.contains(UIDSTORE)||a.createObjectStore(UIDSTORE)};console.log(e);e.onerror=function(a){console.log("error: ")};e.onsuccess=function(a){d=e.result;console.log("success: "+d);d.setVersion&&d.version!=dbversion&&(d.setVersion(dbversion).onsuccess=function(){f(d)});a=d.transaction([dbname],
"readwrite");a.objectStore(dbname).put(gsid,"subscriptionid");a.objectStore(dbname).put(b.id,"server_id")};e.onupgradeneeded=function(a){console.log(a.target.result);f(a.target.result)}})})["catch"](function(a){console.log("Fetch Error :-S",a)})}
function subscribeDevice(a,b,c,d,e){a=void 0===a?0:a;navigator.serviceWorker.ready.then(function(f){service_worker=f;f.pushManager.subscribe({userVisibleOnly:!0}).then(function(f){return onPushSubscription(f,a,b,c,d,e,notifyClickType)}).catch(function(a){"granted"==Notification.permission?$(".notf-overlay").hide():"default"==Notification.permission?$(".notf-overlay").hide():"denied"==Notification.permission&&$(".notf-overlay").hide();"denied"===Notification.permission?(console.log("Permission for Notifications was denied"),
fetch("/scripts/cms/controller.php?module=subscription&type=notificationBlocked&device_type=computer",{method:"post"}).then(function(a){a.text().then(function(a){console.log(a)})})):console.log("Unable to subscribe to push.",a)})})}
function unsubscribeDevice(){navigator.serviceWorker.ready.then(function(a){a.pushManager.getSubscription().then(function(a){a&&a.unsubscribe().then(function(a){var b=localStorage.getItem("gzenglish_subscription_id");if(""==b||"undefined"==b||null==b)b="";""!=b&&fetch("/scripts/cms/controller.php?module=subscription&type=unsubscribe&sys_gen_id="+b+"&website_id=113",{method:"post"}).then(function(a){a.text().then(function(c){console.log(c);c=JSON.parse(c);""==b&&localStorage.setItem("gzenglish_subscription_id",
c.id);console.log("Unsubscribed from push: ",a)})})}).catch(function(a){console.log("Unsubscription error: ",a)})}).catch(function(a){console.error("Error thrown while unsubscribing from push messaging.",a)})})}function onRegisterNotify(a){try{a.showNotification("www.gizbot.com",{body:"Thank you for subscribing to Gizbot News alerts.",icon:"/images/gizbot-144.png",vibrate:[300,100,400],tag:"gzenglish-welcome",data:{url:"https://www.gizbot.com"}})}catch(b){}}
function permissionStatusChange(a){switch(console.log("permissionStatusChange = ",a),a.status){case "denied":console.log("denied");break;case "granted":console.log("granted");break;case "prompt":console.log("prompt")}}
function setUpPushPermission(){navigator.permissions.query({name:"push",userVisibleOnly:!0}).then(function(a){permissionStatusChange(a);a.onchange=function(){permissionStatusChange(this)};navigator.serviceWorker.ready.then(function(a){a.pushManager.getSubscription().then(function(a){return a})["catch"](function(a){console.log("An error occured while calling getSubscription()",a)})})})["catch"](function(a){console.error(a);console.log("Ooops Unable to check the permission , Unfortunately the permission for push notifications couldn't be checked. Are you on Chrome 43+?")})}
function setUpNotificationPermission(){return"denied"===Notification.permission?console.log("Ooops Notifications are Blocked","Unfortunately notifications are permanently blocked. Please unblock / allow them to switch on push notifications."):"default"===Notification.permission?1:void navigator.serviceWorker.ready.then(function(a){a.pushManager.getSubscription().then(function(a){return a})})}
function initialiseState(){return"PushManager"in window?"permissions"in navigator?void setUpPushPermission():void setUpNotificationPermission():1}window.addEventListener("load",function(){1==BROWSER_SUPPORTS&&("granted"==Notification.permission?(console.log("Granted Mode"),1==BROWSER_SUPPORTS&&subscribeDevice()):"default"==Notification.permission?console.log("Default Mode"):"denied"==Notification.permission&&console.log("Denied Mode"))});
